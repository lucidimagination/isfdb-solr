<dataConfig>
    <dataSource type="JdbcDataSource" 
                driver="com.mysql.jdbc.Driver"
                encoding="UTF-8"
                batchSize="-1" 
                url="${dataimporter.request.jdbc.url}" 
                user="${dataimporter.request.jdbc.user}" 
                password="${dataimporter.request.jdbc.pass}"
                />
    <document>
        <entity name="title" 
                transformer="TemplateTransformer"
                pk="title_id"
                query="select T.title_id as title_id,
                              T.title_ttype as title_ttype,
                              T.title_views as title_views,
                              T.title_annualviews as title_annualviews,
                              T.title_rating as title_rating,
                              T.title_seriesnum as title_seriesnum,
                              T.title_copyright as title_copyright,
                              T.title_storylen as title_storylen,
                              T.title_translator as title_translator,
                              T.title_title as title_title,
                              T.title_wikipedia as title_wikipedia
                       from   titles T ">
          <field  column="doc_id" template="TITLE_${title.title_id}" />
          <field  column="doc_type" template="TITLE" />
          <entity name="title_author"
                  processor="CachedSqlEntityProcessor"
                  where="title_id=title.title_id"
                  query="select author_id, title_id 
                         from   canonical_author
                         where  ca_status = 1">
            <entity name="author"
                    processor="CachedSqlEntityProcessor"
                    where="author_id=title_author.author_id"
                    query="select A.author_id as author_id,
                                  A.author_marque as author_marque,
                                  A.author_canonical as author_canonical,
                                  A.author_image as author_image,
                                  A.author_imdb as author_imdb,
                                  A.author_wikipedia as author_wikipedia
                           from   authors A">
            </entity>
          </entity>
        </entity>
     </document>
</dataConfig>
